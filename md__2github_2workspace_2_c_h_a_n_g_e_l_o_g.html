<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NimBLE-Arduino: Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NimBLE-Arduino<span id="projectnumber">&#160;2.3.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__2github_2workspace_2_c_h_a_n_g_e_l_o_g.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Changelog</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="changelog"></a>All notable changes to this project will be documented in this file.</p>
<h1><a class="anchor" id="autotoc_md237-2025-12-08"></a>
[2.3.7] 2025-12-08</h1>
<h1><a class="anchor" id="fixed"></a>
Fixed</h1>
<ul>
<li>Server created client instance will now receive notifications/indications from the peer.</li>
<li>Improper HCI delay when ACL buffers are full (esp32)</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html" title="A model of a BLE client.">NimBLEClient</a></code> disconnect event not triggered if the peer address doesn't match a connection.</li>
<li>Attribute value sizes now correctly calculated for types larger than 8 bits.</li>
<li><code>NimBLERemoteCharacteristic::retrieveDescriptors</code> will now use the handle range of the characteristic.</li>
</ul>
<h1><a class="anchor" id="added"></a>
Added</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_characteristic_callbacks.html#a6f9b1f0f15492e3d47662e5e2ff0baee" title="Callback function to support a Notify/Indicate Status report.">NimBLECharacteristicCallbacks::onStatus</a></code> overload that takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter to indicate which client the status is for.</li>
</ul>
<h1><a class="anchor" id="changed"></a>
Changed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaf9b3f725c8e8dd0c1d1c99f0c8c4a3a" title="Set a custom callback for gap events.">NimBLEDevice::setCustomGapHandler</a></code> added a void pointer parameter to allow passing user data to the custom handler.</li>
</ul>
<h1><a class="anchor" id="autotoc_md236-2025-09-05"></a>
[2.3.6] 2025-09-05</h1>
<h1><a class="anchor" id="fixed-1"></a>
Fixed</h1>
<ul>
<li><a class="el" href="class_nim_b_l_e_advertised_device.html#ab9710a6c3a141b6413d5159dfe4a4040" title="Check if this device is advertising as connectable.">NimBLEAdvertisedDevice::isConnectable</a> returning incorrect result.</li>
<li>Extended advertisements not reporting full data.</li>
</ul>
<h1><a class="anchor" id="added-1"></a>
Added</h1>
<ul>
<li>Support up to 1650 bytes of advertisement with extended advertising.</li>
</ul>
<h1><a class="anchor" id="autotoc_md235-2025-09-02"></a>
[2.3.5] 2025-09-02</h1>
<h1><a class="anchor" id="fixed-2"></a>
Fixed</h1>
<ul>
<li>esp32c3/s3 max connections not being properly applied.</li>
</ul>
<h1><a class="anchor" id="autotoc_md234-2025-08-10"></a>
[2.3.4] 2025-08-10</h1>
<h1><a class="anchor" id="fixed-3"></a>
Fixed</h1>
<ul>
<li><code>NimBLEClientCallbacks::OnConnectFail</code> not called when connection not established.</li>
<li>Removed invalid reference to refactored original examples in README.md.</li>
<li>Cleanup redefinition warnings for arduino core 3.3+.</li>
</ul>
<h1><a class="anchor" id="autotoc_md233-2025-07-27"></a>
[2.3.3] 2025-07-27</h1>
<h1><a class="anchor" id="fixed-4"></a>
Fixed</h1>
<ul>
<li>Multiple definition errors for some functions with esp32c6/h2/c2 with Arduino core 3.3+.</li>
</ul>
<h1><a class="anchor" id="autotoc_md232-2025-06-27"></a>
[2.3.2] 2025-06-27</h1>
<h1><a class="anchor" id="fixed-5"></a>
Fixed</h1>
<ul>
<li>Max connections not being applied correctly above 4.</li>
<li>Build errors with arduino cores using IDF v4.x</li>
<li><code>onConnect</code> callback not being called when the status is <code>BLE_ERR_UNSUPP_REM_FEATURE</code>, workaround for upstream issue.</li>
</ul>
<h1><a class="anchor" id="changed-1"></a>
Changed</h1>
<ul>
<li>FreeRTOS port uses the old porting layer for all but the latest esp32 mcus.</li>
<li>By default BLE secure connections is disabled now to reduce issues when it's enabled but not used by the application.</li>
<li>BLE mesh files are now only compiled if mesh is enabled in the project configuration.</li>
</ul>
<h1><a class="anchor" id="autotoc_md231-2025-06-11"></a>
[2.3.1] 2025-06-11</h1>
<h1><a class="anchor" id="fixed-6"></a>
Fixed</h1>
<ul>
<li>EddystoneTLM example not setting the data.</li>
<li>Build errors when disabling BLE roles.</li>
<li>esp32c2 build issues due to multiple definitions of various functions.</li>
<li><code>NimBLEClient::readValue</code> call not returning when the instance was created with a<code><a class="el" href="class_nim_b_l_e_server.html" title="The model of a BLE server.">NimBLEServer</a></code> and reading a secured characteristic.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html" title="Perform and manage BLE scans.">NimBLEScan</a></code> destructor potentially causing a crash.</li>
</ul>
<h1><a class="anchor" id="added-2"></a>
Added</h1>
<ul>
<li>iBeacon example.</li>
<li><code>NimBLEBeacon::BeaconData</code> <code>std::vector&lt;uint8_t&gt;</code> operator to allow it to be used as a parameter to <code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a0b076298058755149b4351727d70b198" title="Set manufacturer specific data.">NimBLEAdvertisementData::setManufacturerData</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md230-2025-05-19"></a>
[2.3.0] 2025-05-19</h1>
<h1><a class="anchor" id="fixed-7"></a>
Fixed</h1>
<ul>
<li>Incorrect <code>NimBLECharacteristic::onSubscribe</code> value when indications are set.</li>
<li><code>NimBLECharacteristic::onRead</code> callback not called in some cases.</li>
<li>Clear attribute value when zero length value is written.</li>
<li>Notify/Indicate incorrectly returning success with custom value.</li>
<li>Corrected <a class="el" href="class_nim_b_l_e_client.html" title="A model of a BLE client.">NimBLEClient</a> array initialization.</li>
<li>Prevent potential exception when scan is restarted.</li>
<li>Attribute getValue failing with some data types</li>
<li>Incorrectly passing a pointer to a function taking const reference.</li>
</ul>
<h1><a class="anchor" id="added-3"></a>
Added</h1>
<ul>
<li>Support for esp32c2, esp32c5, esp32c6, esp32h2</li>
<li>L2CAP infrastructure.</li>
<li>Scan duplicate cache reset time.</li>
</ul>
<h1><a class="anchor" id="changed-2"></a>
Changed</h1>
<ul>
<li>Cleaned up examples.</li>
<li>Update nimble core to esp-nimble @70439dd.</li>
<li>Disable flow control for all targets except original esp32.</li>
<li>Allow PHY updates without enabling extended advertising.</li>
<li>Reduced iram usage</li>
</ul>
<h1><a class="anchor" id="autotoc_md223-2025-02-28"></a>
[2.2.3] 2025-02-28</h1>
<h1><a class="anchor" id="fixed-8"></a>
Fixed</h1>
<ul>
<li>Added back <code><a class="el" href="class_nim_b_l_e_client.html#a2b49bc73802bf716cf3df3b5a93f0543" title="Connect to an advertising device.">NimBLEClient::connect</a></code> overload with <code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a></code> parameter to resolve connection error due to NULL address.</li>
<li>Crash caused by returning invalid vector entry when retrieving remote descriptors.</li>
</ul>
<h1><a class="anchor" id="autotoc_md222-2025-02-24"></a>
[2.2.2] 2025-02-24</h1>
<h1><a class="anchor" id="fixed-9"></a>
Fixed</h1>
<ul>
<li>Crash when calling <code><a class="el" href="class_nim_b_l_e_client.html#a3903fb7589e2b8b781f8f81f9e0f2a83" title="Get the value of a specific characteristic associated with a specific service.">NimBLEClient::DiscoverAttributes</a></code>.</li>
</ul>
<h1><a class="anchor" id="added-4"></a>
Added</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device_callbacks.html" title="Callbacks associated with a BLE device.">NimBLEDeviceCallbacks</a></code> class with a callback for handling bond storage.</li>
</ul>
<h1><a class="anchor" id="autotoc_md221-2025-01-26"></a>
[2.2.1] 2025-01-26</h1>
<h1><a class="anchor" id="fixed-10"></a>
Fixed</h1>
<ul>
<li>remote descriptor discovery error when no descriptors exist.</li>
<li>scan filter settings not enabled for esp32s3/c3.</li>
<li>remote descriptor discovery returning more than the desired descriptor.</li>
</ul>
<h1><a class="anchor" id="autotoc_md220-2025-01-12"></a>
[2.2.0] 2025-01-12</h1>
<h1><a class="anchor" id="fixed-11"></a>
Fixed</h1>
<ul>
<li>Crash when retrieving descriptors if more than one exists.</li>
<li>Incorrect TX power value being advertised.</li>
<li>New user guide code for 2.x</li>
<li>Potential race condition if <code><a class="el" href="class_nim_b_l_e_scan.html#ad421a09eeb021755b193a7a5e01f183b" title="Clear the stored results of the scan.">NimBLEScan::clearResults</a></code> is called from multiple tasks.</li>
</ul>
<h1><a class="anchor" id="changed-3"></a>
Changed</h1>
<ul>
<li>If privacy is not enabled identity keys will not be shared.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Set the transmission power.">NimBLEDevice::setPower</a></code> and <code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> now take an additional parameter <code>NimBLETxPowerType</code> to set/get the power level for different operations.</li>
<li>ESP32 devices now use esp_timer instead of freeRTOS timers for BLE operations by default.</li>
</ul>
<h1><a class="anchor" id="added-5"></a>
Added</h1>
<ul>
<li>Config option to use mbedtls instead of tinycrypt for crypto operations, this will save approximately 8k of flash if already using mbedtls for other applications (https, mqtts, etc..).</li>
<li>Config option <code>CONFIG_NIMBLE_CPP_ADDR_FMT_EXCLUDE_DELIMITER</code>, if defined will remove the ":" delimiter from the BLE address string.</li>
<li>Config option <code>CONFIG_NIMBLE_CPP_ADDR_FMT_UPPERCASE</code> if defined will make the BLE address strings uppercase.</li>
</ul>
<h1><a class="anchor" id="autotoc_md213-2025-01-05"></a>
[2.1.3] 2025-01-05</h1>
<h1><a class="anchor" id="fixed-12"></a>
Fixed</h1>
<ul>
<li>Unused variable warning when log level is below info.</li>
<li>Race condition in <code><a class="el" href="class_nim_b_l_e_scan.html" title="Perform and manage BLE scans.">NimBLEScan</a></code> that can cause a crash due to heap corruption if <code><a class="el" href="class_nim_b_l_e_scan.html#a68fa5cc715f62a9a97ac0dccfb8557c1" title="Stop an in progress scan.">NimBLEScan::stop</a></code> is called from the <code>onResult</code> callback.</li>
<li>Advertisement data not set if scan response is enabled after the data is set.</li>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html" title="The model of a BLE Characteristic.">NimBLECharacteristic</a></code>/<code><a class="el" href="class_nim_b_l_e_descriptor.html" title="A model of a BLE descriptor.">NimBLEDescriptor</a></code> not able to update their values in the <code>onRead</code> callback.</li>
<li>Too short of a timeout being requested in NimBLE_Server example leading to frequent disconnects.</li>
</ul>
<h1><a class="anchor" id="changed-4"></a>
Changed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_h_i_d_device.html" title="A model of a BLE Human Interface Device.">NimBLEHIDDevice</a></code> now allows for the same report ID in multiple input/output/feature reports.</li>
</ul>
<h1><a class="anchor" id="added-6"></a>
Added</h1>
<ul>
<li>Error logs in the case that NIMBLE_CPP_DEBUG_ASSERT is not defined.</li>
<li>Error logs when setting advertisement data fails.</li>
<li>Missing documentation in the migration guide about enabling automatic advertising on disconnect, which was disabled by default in 2.x.</li>
</ul>
<h1><a class="anchor" id="autotoc_md212-2024-12-21"></a>
[2.1.2] 2024-12-21</h1>
<h1><a class="anchor" id="fixed-13"></a>
Fixed</h1>
<ul>
<li>Compile error when only advertising role is enabled.</li>
<li>Possible crash if bonded client reconnects.</li>
</ul>
<h1><a class="anchor" id="changed-5"></a>
Changed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_h_i_d_device.html" title="A model of a BLE Human Interface Device.">NimBLEHIDDevice</a></code> can now create more than one in/out/feature report map.</li>
</ul>
<h1><a class="anchor" id="autotoc_md211-2024-12-16"></a>
[2.1.1] 2024-12-16</h1>
<h1><a class="anchor" id="fixed-14"></a>
Fixed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ace0ea997b5c986bb8a56cd8673163203" title="Get the output report characteristic.">NimBLEHIDDevice::getOutputReport</a></code> will now return the correct characteristic.</li>
<li>Compile error when central is disabled, class <code><a class="el" href="class_nim_b_l_e_server.html" title="The model of a BLE server.">NimBLEServer</a></code> has no member named <code>m_pClient</code>.</li>
<li>Compile error with nRF devices, unresolved symbol <code>nimble_port_stop</code>.</li>
</ul>
<h1><a class="anchor" id="changed-6"></a>
Changed</h1>
<ul>
<li>Added missing includes for <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code> and <code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code> to <code><a class="el" href="_nim_b_l_e_device_8h_source.html">NimBLEDevice.h</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md210-2024-12-14"></a>
[2.1.0] 2024-12-14</h1>
<h1><a class="anchor" id="breaking-changes"></a>
&lt;strong&gt;Breaking changes&lt;/strong&gt;</h1>
<ul>
<li>NimBLESecurity class removed.</li>
<li>All connection oriented callbacks now receive a reference to <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code>, the <code>ble_gap_conn_desc</code> has also been replace with <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code> in the functions that received it.</li>
<li>All functions that take a time input parameter now expect the value to be in milliseconds instead of seconds.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html" title="A model of a BLE Device from which all the BLE roles are created.">NimBLEDevice</a></code> Ignore list functions removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a8b6b4bedfe37725ed9c20e91a3470005" title="Start the connection securing and authorization for this connection.">NimBLEDevice::startSecurity</a></code> now returns a <code>bool</code>, true on success, instead of an int to be consistent with the rest of the library.</li>
<li><code>NimBLEDevice::getInitialized</code> renamed to <code><a class="el" href="class_nim_b_l_e_device.html#a425561f1e23856756ab9c1c330da5737" title="Check if the initialization is complete.">NimBLEDevice::isInitialized</a></code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Set the transmission power.">NimBLEDevice::setPower</a></code> no longer takes the <code>esp_power_level_t</code> and <code>esp_ble_power_type_t</code>, instead only an integer value in dbm units is accepted.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> no longer takes a <code>bool nrpa</code> parameter.</li>
<li><code>NimBLEDevice::getClientListSize</code> replaced with <code><a class="el" href="class_nim_b_l_e_device.html#a0944f3f6eca16ed4b7fd96d88b2906d9" title="Get the number of created client objects.">NimBLEDevice::getCreatedClientCount</a></code>.</li>
<li><code>NimBLEDevice::getClientList</code> was removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#ac79e828bcc3c45ae817bf51be914bfc0" title="Disconnect the specified client with optional reason.">NimBLEServer::disconnect</a></code> now returns <code>bool</code>, true = success, instead of <code>int</code> to be consistent with the rest of the library.</li>
<li><code>NimBLEServer::getPeerIDInfo</code> renamed to <code><a class="el" href="class_nim_b_l_e_server.html#a08916d16ea00b4718bd6241bd407829f" title="Get the connection information of a connected peer by connection handle.">NimBLEServer::getPeerInfoByHandle</a></code> to better describe it's use.</li>
<li><code>NimBLEServerCallbacks::onMTUChanged</code> renamed to <code><a class="el" href="class_nim_b_l_e_server_callbacks.html#ab702f73e739b4df72e191f47056c01ff" title="Called when the connection MTU changes.">NimBLEServerCallbacks::onMTUChange</a></code> to be consistent with the client callback.</li>
<li><code>NimBLEServerCallbacks::onPassKeyRequest</code> has been replaced with <code>NimBLEServer::onPassKeyDisplay</code> which should display the pairing pin that the client is expected to send.</li>
<li><code><a class="el" href="class_nim_b_l_e_server_callbacks.html#a7cbed42919678d9e8d40b351dec82523" title="Called when the pairing procedure is complete.">NimBLEServerCallbacks::onAuthenticationComplete</a></code> now takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#adefe48b87e8a814e1643cdb8c3759298" title="Get a pointer to the vector of found services.">NimBLEClient::getServices</a></code> now returns a const reference to std::vector&lt;NimBLERemoteService*&gt; instead of a pointer to the internal vector.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a3903fb7589e2b8b781f8f81f9e0f2a83" title="Get the value of a specific characteristic associated with a specific service.">NimBLEClient::getConnId</a></code> has been renamed to <code>getConnHandle</code> to be consistent with bluetooth terminology.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a36b298b70a42d32b8d578869b0763140" title="Disconnect from the peer.">NimBLEClient::disconnect</a></code> now returns a <code>bool</code>, true on success, instead of an int to be consistent with the rest of the library.</li>
<li><code><a class="el" href="class_nim_b_l_e_client_callbacks.html#ad618179ade926482a7f2d94b0deabd69" title="Called when disconnected from the server.">NimBLEClientCallbacks::onDisconnect</a></code> now takes an additional <code>int reason</code> parameter to let the application know why the disconnect occurred.</li>
<li><code>NimBLEClientCallbacks::onPassKeyRequest</code> has been changed to <code><a class="el" href="class_nim_b_l_e_client_callbacks.html#aacb0b757e6e7c7984d8389c83fe1937d" title="Called when server requests a passkey for pairing.">NimBLEClientCallbacks::onPassKeyEntry</a></code> which takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter and does not return a value. Instead or returning a value this callback should prompt a user to enter a pin number which is sent later via <code><a class="el" href="class_nim_b_l_e_device.html#a5071168b3bda69aa4457a43473ad7a96" title="Inject the provided passkey into the Security Manager.">NimBLEDevice::injectPassKey</a></code>.</li>
<li><code>NimBLEClientCallbacks::onConfirmPIN</code> renamed to <code><a class="el" href="class_nim_b_l_e_client_callbacks.html#a6e7cfa81cd43420f78d6da727c67928b" title="Called when using numeric comparision for pairing.">NimBLEClientCallbacks::onConfirmPasskey</a></code> and no longer returns a value and now takes a <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a>&amp;</code> parameter. This should be used to prompt a user to confirm the pin on the display (YES/NO) after which the response should be sent with <code><a class="el" href="class_nim_b_l_e_device.html#aff35384524ab80a19ce1ef23fdcd970b" title="Inject the provided numeric comparison response into the Security Manager.">NimBLEDevice::injectConfirmPasskey</a></code>.</li>
<li><code>NimBLEAdvertising::setMinPreferred</code> and <code>NimBLEAdvertising::setMaxPreferred</code> have been removed, use <code><a class="el" href="class_nim_b_l_e_advertising.html#a9dbb66ca66aa040731fcfd737f881469" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertising::setPreferredParams</a></code> instead.</li>
<li>Advertising the name and TX power of the device will no longer happen by default and should be set manually by the application.</li>
<li><code>NimBLEAdvertising::setAdvertisementType</code> has been renamed to <code><a class="el" href="class_nim_b_l_e_advertising.html#ae49d2bd91cabca46ec7c4bbd7fc49407" title="Set the type of connectable mode to advertise.">NimBLEAdvertising::setConnectableMode</a></code> to better reflect it's function.</li>
<li><code>NimBLEAdvertising::setScanResponse</code> has been renamed to <code><a class="el" href="class_nim_b_l_e_advertising.html#a6badd669ddf4ff8507561d5041d093d6" title="Enable scan response data.">NimBLEAdvertising::enableScanResponse</a></code> to better reflect it's function.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code>; Scan response is no longer enabled by default.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> No longer takes a callback pointer parameter, instead the new method <code><a class="el" href="class_nim_b_l_e_advertising.html#a3e81d7d3aa2b72b8db58427d4a42727b" title="Set the callback to be invoked when advertising stops.">NimBLEAdvertising::setAdvertisingCompleteCallback</a></code> should be used.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a67f4d6869eb2797bc78389adf20cb59e" title="Add data to the payload to be advertised.">NimBLEAdvertisementData::addData</a></code> now takes either a <code>std::vector&lt;uint8_t&gt;</code> or <code>uint8_t* + length</code> instead of <code>std::string</code> or <code>char + length</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a2f6960683e8b98d1c3ecf88bb5ec56eb" title="Retrieve the payload that is to be advertised.">NimBLEAdvertisementData::getPayload</a></code> now returns <code>std::vector&lt;uint8_t&gt;</code> instead of <code>std::string</code>.</li>
<li>The callback parameter for <code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> has been removed and the blocking overload of <code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> has been replaced by an overload of <code><a class="el" href="class_nim_b_l_e_scan.html#a2ae53719546e2d410c816e12c56aad61" title="Get the results of the scan.">NimBLEScan::getResults</a></code> with the same parameters.</li>
<li><code>NimBLEAdvertisedDeviceCallbacks</code> Has been replaced by <code><a class="el" href="class_nim_b_l_e_scan_callbacks.html" title="A callback handler for callbacks associated device scanning.">NimBLEScanCallbacks</a></code> which contains the following methods: <code>onResult</code>, <code>onScanEnd</code>, and <code>onDiscovered</code></li>
<li><code>-</code><a class="el" href="class_nim_b_l_e_scan_callbacks.html#a962d8b08cf14ac3091e6fd6962d7e283" title="Called when a new scan result is complete, including scan response data (if applicable).">NimBLEScanCallbacks::onResult</a><code>, functions the same as the old</code>NimBLEAdvertisedDeviceCallbacks::onResult<code>but now takes aa</code>const NimBLEAdvertisedDevice*<code>instead of non-const.</code></li>
<li><code>-</code><a class="el" href="class_nim_b_l_e_scan_callbacks.html#a61c11db405e87ec847066ca3b6ad8375" title="Called when a scan operation ends.">NimBLEScanCallbacks::onScanEnd</a><code>, replaces the scanEnded callback passed to</code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a><code>and now takes a</code>const <a class="el" href="class_nim_b_l_e_scan_results.html" title="A class that contains and operates on the results of a BLE scan.">NimBLEScanResults</a>&amp;<code>and</code>int reason<code>parameter.</code></li>
<li><code>-</code><a class="el" href="class_nim_b_l_e_scan_callbacks.html#a1f9b5eac5982340afbb84954a4c06277" title="Called when a new device is discovered, before the scan result is received (if applicable).">NimBLEScanCallbacks::onDiscovered</a><code>, This is called immediately when a device is first scanned, before any scan response data is available and takes a</code>const NimBLEAdvertisedDevice*<code>parameter. -</code><a class="el" href="class_nim_b_l_e_scan.html#a68fa5cc715f62a9a97ac0dccfb8557c1" title="Stop an in progress scan.">NimBLEScan::stop</a><code>will no longer call the</code>onScanEnd<code>callback as the caller should know its been stopped when this is called. -</code>NimBLEScan::clearDuplicateCache<code>has been removed as it was problematic and only for the esp32. Stop and start the scanner for the same effect. -</code><a class="el" href="class_nim_b_l_e_scan_results.html#a98b106a3929919bf2c80cc0dfff59ba1" title="Return the specified device at the given index. The index should be between 0 and getCount()-1.">NimBLEScanResults::getDevice</a><code>methods now return</code>const NimBLEAdvertisedDevice*<code>. -</code><a class="el" href="class_nim_b_l_e_scan_results.html" title="A class that contains and operates on the results of a BLE scan.">NimBLEScanResults</a><code>iterators are now</code>const_iterator<code>. -</code><a class="el" href="class_nim_b_l_e_service.html#a8219ccefd97180bee485b62572c62e58">NimBLEService::getCharacteristics</a><code>now returns a</code>const std::vector&lt;NimBLECharacteristic*&gt;&amp;<code>instead of std::vector&lt;<a class="el" href="class_nim_b_l_e_characteristic.html" title="The model of a BLE Characteristic.">NimBLECharacteristic</a> *&gt;. -</code><a class="el" href="class_nim_b_l_e_characteristic.html#ac4482e038124724d8bb6d147bcdb5481" title="Send a notification.">NimBLECharacteristic::notify</a><code>no longer takes a</code>bool is_notification<code>parameter, instead</code>indicate()<code>should be called to send indications. -</code>NimBLECharacteristicCallbacks::onNotify<code>removed as unnecessary, the library does not call notify without app input. -</code><a class="el" href="class_nim_b_l_e_characteristic_callbacks.html#a6f9b1f0f15492e3d47662e5e2ff0baee" title="Callback function to support a Notify/Indicate Status report.">NimBLECharacteristicCallbacks::onStatus</a><code>No longer takes a</code>status<code>parameter, refer to the return code for success/failure. -</code><a class="el" href="class_nim_b_l_e_remote_service.html#a5b07f0756c401d40396886e80d64b03b" title="Get a pointer to the vector of found characteristics.">NimBLERemoteService::getCharacteristics</a><code>now returns a</code>const std::vector&lt;NimBLERemoteCharacteristic*&gt;&amp;<code>instead of non-const</code>std::vector&lt;NimBLERemoteCharacteristic*&gt;*<code>. -</code><a class="el" href="class_nim_b_l_e_remote_service.html#ac2f19f76f0c0ac9b0efe2baa2ad2f7ec" title="Read the value of a characteristic associated with this service.">NimBLERemoteService::getValue</a><code>now returns</code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a><code>instead of</code>std::string<code>. -</code><a class="el" href="class_nim_b_l_e_remote_characteristic.html#a1b3bbd1bcdde6dd952ee69ebad0ffc58" title="Get the remote service associated with this characteristic.">NimBLERemoteCharacteristic::getRemoteService</a><code>now returns a</code>const NimBLERemoteService*<code>instead of non-const. -</code>NimBLERemoteCharacteristic::readUInt32<code>Has been removed. -</code>NimBLERemoteCharacteristic::readUInt16<code>Has been removed. -</code>NimBLERemoteCharacteristic::readUInt8<code>Has been removed. -</code>NimBLERemoteCharacteristic::readFloat<code>Has been removed. -</code>NimBLERemoteCharacteristic::registerForNotify<code>Has been removed. -</code>NimBLEAdvertisedDevice::hasRSSI<code>removed as redundant, RSSI is always available. -</code><a class="el" href="class_nim_b_l_e_advertised_device.html#a12971984cf749647c659b659bdfeda5d" title="Get the payload advertised by the device.">NimBLEAdvertisedDevice::getPayload</a><code>now returns</code>const std::vector&lt;uint8_t&gt;<code>instead of a pointer to internal memory. -</code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a><code>Timestamp removed, if needed then the app should track the time from the callback. -</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a><code>constructor; default value for the</code>type<code>parameter removed, caller should know the address type and specify it. -</code>NimBLEAddress::getNative<code>replaced with</code><a class="el" href="class_nim_b_l_e_address.html#a31b466293f6cb752d5aba6b6ffb95351" title="Get the NimBLE base struct of the address.">NimBLEAddress::getBase</a><code>and now returns a pointer to</code>const ble_addr_t<code>instead of a pointer to the address value. -</code><a class="el" href="class_nim_b_l_e_address.html#a826fe8850cbc7d54f0696b8af4637169" title="Determine if this address equals another.">NimBLEAddress::equals</a><code>method and</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a>::== operator<code>will now also test if the address types are the same. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#acf379fca7d3689a73e6750d7ab50a0af" title="Get the uuid value.">NimBLEUUID::getNative</a><code>method replaced with</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#a68c61ae225675ac84d60f76058a5bdd4" title="Get a pointer to the NimBLE UUID base structure.">NimBLEUUID::getBase</a><code>which returns a read-only pointer to the underlying</code>ble_uuid_t<code>struct. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a><code>;</code>msbFirst<code>parameter has been removed from constructor, caller should reverse the data first or call the new</code>reverseByteOrder<code>method after. -</code>NimBLEUtils::dumpGapEvent<code>function removed. -</code>NimBLEUtils::buildHexData<code>replaced with</code><a class="el" href="class_nim_b_l_e_utils.html#a53f0b19687b0706ec48d6b630e209acb" title="Create a hexadecimal string representation of the input data.">NimBLEUtils::dataToHexString</a><code>, which returns a</code>std::string<code>containing the hex string.</code></li>
<li><code>Removed Eddystone URL as it has been shutdown by google since 2021. -</code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html#af5ff73359f3c7f7e76395d32f4efe575" title="Set the temperature to advertise.">NimBLEEddystoneTLM::setTemp</a><code>now takes an</code>int16_t<code>parameter instead of float to be friendly to devices without floating point support. -</code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html#a72589029e329c3939b05f9df5e8113ce" title="Get the temperature being advertised.">NimBLEEddystoneTLM::getTemp</a><code>now returns</code>int16_t<code>to work with devices that don't have floating point support. -</code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html#a05989cc6df5d5dc423c878d2317ddb89" title="Set the raw data for the beacon advertisement.">NimBLEEddystoneTLM::setData</a><code>now takes a reference to *</code>NimBLEEddystoneTLM::BeaconData<code>instead of</code>std::string<code>. -</code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html#a32c448f92ce2e61a9589d1cb0d149d07" title="Retrieve the data that is being advertised.">NimBLEEddystoneTLM::getData</a><code>now returns a reference to *</code>NimBLEEddystoneTLM::BeaconData<code>instead of</code>std::string<code>. -</code><a class="el" href="class_nim_b_l_e_beacon.html#ab6475aaa5d8a93e24401da3b4b272496" title="Set the beacon data.">NimBLEBeacon::setData</a><code>now takes</code>const NimBLEBeacon::BeaconData&amp;<code>instead of</code>std::string<code>. -</code><a class="el" href="class_nim_b_l_e_beacon.html#a8ac2cd99dd5a8a996f3556f9e5d20bbb" title="Retrieve the data that is being advertised.">NimBLEBeacon::getData</a><code>now returns</code>const NimBLEBeacon::BeaconData&amp;<code>instead of</code>std::string<code>. -</code>NimBLEHIDDevice::reportMap<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#afe75c42779aef757cd3ba84ec281efb5" title="Get the report map characteristic.">NimBLEHIDDevice::getReportMap</a><code>. -</code>NimBLEHIDDevice::hidControl<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ab29c3d71cd592aa867b8c6655d586f24" title="Get the HID control point characteristic.">NimBLEHIDDevice::getHidControl</a><code>. -</code>NimBLEHIDDevice::inputReport<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#af2f973843304c2d513963a9dbbc48714" title="Get the input report characteristic.">NimBLEHIDDevice::getInputReport</a><code>. -</code>NimBLEHIDDevice::outputReport<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ace0ea997b5c986bb8a56cd8673163203" title="Get the output report characteristic.">NimBLEHIDDevice::getOutputReport</a><code>. -</code>NimBLEHIDDevice::featureReport<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ac34cb2703dc655220270604e2a28cf41" title="Get the feature report characteristic.">NimBLEHIDDevice::getFeatureReport</a><code>. -</code>NimBLEHIDDevice::protocolMode<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#a1bdd21f3cc61d0128b06cdfd9588d6f5" title="Get the HID protocol mode characteristic.">NimBLEHIDDevice::getProtocolMode</a><code>. -</code>NimBLEHIDDevice::bootOutput<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ad2584be6dfe497dc83686a51ff0194f6" title="Create a keyboard boot output report characteristic.">NimBLEHIDDevice::getBootOutput</a><code>. -</code>NimBLEHIDDevice::pnp<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#ab0495fb5fbee85277a14a0b9476a0239" title="Sets the Plug n Play characteristic value.">NimBLEHIDDevice::setPnp</a><code>. -</code>NimBLEHIDDevice::hidInfo<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#aea007674892608877cdbf9122208ba28" title="Sets the HID Information characteristic value.">NimBLEHIDDevice::setHidInfo</a><code>. -</code>NimBLEHIDDevice::deviceInfo<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#a7d6592bba748b4be7ed1e4fb9275d346" title="Get the manufacturer characteristic.">NimBLEHIDDevice::getDeviceInfoService</a><code>. -</code>NimBLEHIDDevice::hidService<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#a2aea1e924f327152db713834bc2ad5a6" title="Get the HID service.">NimBLEHIDDevice::getHidService</a><code>. -</code>NimBLEHIDDevice::batteryService<code>renamed to</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#adce27e45dc04de669c512f6550efadc7" title="Get the battery service.">NimBLEHIDDevice::getBatteryService</a>`.</li>
</ul>
<h1><a class="anchor" id="fixed-15"></a>
Fixed</h1>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> and <code>NimBLEDevice::getPowerLevel</code> bug worked around for the esp32s3 and esp32c3.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Set the transmission power.">NimBLEDevice::setPower</a></code> and <code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> now support the full power range for all esp devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> will now correctly apply the provided address type for all devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a></code> (esp32) return value is now calculated to support devices with different min/max ranges.</li>
<li>Crash if <code><a class="el" href="class_nim_b_l_e_device.html#a66362258c033860e8448032913be355f" title="Shutdown the NimBLE stack/controller.">NimBLEDevice::deinit</a></code> is called when the stack has not been initialized.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html" title="The model of a BLE server.">NimBLEServer</a></code> service changed notifications will now wait until the changes have taken effect and the server re-started before indicating the change to peers, reducing difficultly for some clients to update their data.</li>
<li><code><a class="el" href="class_nim_b_l_e_attribute.html#a7907cb5b0a2d0f8cd9eb016a4ed876d1" title="Get the handle of the attribute.">NimBLEService::getHandle</a></code> will now fetch the handle from the stack if not valid to avoid returning an invalid value.</li>
<li><code>std::vector</code> input to set/write values template.</li>
<li>Pairing failing when the process was started by the peer first.</li>
</ul>
<h2><a class="anchor" id="changed-7"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a2dac3bd373134ae6d22e3b5c96ed65ef" title="Initiate a secure connection (pair/bond) with the server. Called automatically when a characteristic ...">NimBLEClient::secureConnection</a></code> now takes an additional parameter <code>bool async</code>, if true, will send the secure command and return immediately with a true value for successfully sending the command, else false. This allows for asynchronously securing a connection.</li>
<li>Deleting the client instance from the <code>onDisconnect</code> callback is now supported.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a2b49bc73802bf716cf3df3b5a93f0543" title="Connect to an advertising device.">NimBLEClient::connect</a></code> will no longer cancel already in progress connections.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a4e8b16bb2c8ba3534bbd04803a411911" title="Request an update of the data packet length.">NimBLEClient::setDataLen</a></code> now returns bool, true if successful.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#ad168d34de0f57f91824a78688b88b2b8" title="Update the connection parameters:">NimBLEClient::updateConnParams</a></code> now returns bool, true if successful.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a89d5aee4deaba953b8f77af75e3ee910" title="Set the peer address.">NimBLEClient::setPeerAddress</a></code> now returns a bool, true on success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a8b6b4bedfe37725ed9c20e91a3470005" title="Start the connection securing and authorization for this connection.">NimBLEDevice::startSecurity</a></code> now takes and additional parameter <code>int* rcPtr</code> which will provide the return code from the stack if provided.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a83aa0a3d9d57358d35082a442edf8549" title="Delete the client object and remove it from the list. Checks if it is connected or trying to connect ...">NimBLEDevice::deleteClient</a></code> no longer blocks tasks.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a77f9f343143d4f074ffb545dd14cbb2b" title="Get our device address.">NimBLEDevice::getAddress</a></code> will now return the address currently in use.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a2e8bb71daabbffd9eab8787493a45ce7" title="Initialize the BLE environment.">NimBLEDevice::init</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a66362258c033860e8448032913be355f" title="Shutdown the NimBLE stack/controller.">NimBLEDevice::deinit</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaf9b3f725c8e8dd0c1d1c99f0c8c4a3a" title="Set a custom callback for gap events.">NimBLEDevice::setCustomGapHandler</a></code> now returns a bool with <code>true</code> indicating success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> now returns a bool with <code>true</code> indicating success and works with non-esp32 devices.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac4c78fbf7344fbc0d6189e92a756db91" title="Set the transmission power.">NimBLEDevice::setPower</a></code> now returns a bool value, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a43b83de25635b69cfd663a7f0e7784d6" title="Setup local mtu that will be used to negotiate mtu during request from client peer.">NimBLEDevice::setMTU</a></code> now returns a bool value, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a17fe75ad9d4f3d8cfd876b4a9bf70bb0" title="Deletes all bonding information.">NimBLEDevice::deleteAllBonds</a></code> now returns true on success, otherwise false.</li>
<li><code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html" title="Representation of a beacon. See:">NimBLEEddystoneTLM</a></code> internal data struct type <code>BeaconData</code> is now public and usable by the application.</li>
<li><code><a class="el" href="class_nim_b_l_e_beacon.html" title="Representation of a beacon. See:">NimBLEBeacon</a></code> internal data struct type <code>BeaconData</code> is now public and can be used by the application.</li>
<li>Removed tracking of client characteristic subscription status from <code><a class="el" href="class_nim_b_l_e_server.html" title="The model of a BLE server.">NimBLEServer</a></code> and <code><a class="el" href="class_nim_b_l_e_characteristic.html" title="The model of a BLE Characteristic.">NimBLECharacteristic</a></code> and instead uses the functions and tracking in the host stack.</li>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#aabdc2745d2523239a9ab3f02e39aa3cf" title="Send an indication.">NimBLECharacteristic::indicate</a></code> now takes the same parameters as <code>notify</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#ac4482e038124724d8bb6d147bcdb5481" title="Send a notification.">NimBLECharacteristic::notify</a></code> and <code><a class="el" href="class_nim_b_l_e_characteristic.html#aabdc2745d2523239a9ab3f02e39aa3cf" title="Send an indication.">NimBLECharacteristic::indicate</a></code> now return a <code>bool</code>, true = success.</li>
<li>Added optional <code>connHandle</code> parameter to <code><a class="el" href="class_nim_b_l_e_characteristic.html#ac4482e038124724d8bb6d147bcdb5481" title="Send a notification.">NimBLECharacteristic::notify</a></code> to allow for sending notifications to specific clients.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html" title="The model of a BLE server.">NimBLEServer</a></code> Now uses a std::array to store client connection handles instead of std::vector to reduce memory allocation.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html" title="Extended advertisement data.">NimBLEExtAdvertisement</a></code>; All functions that set data now return <code>bool</code>, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Advertising data is now stored in instances of <code>NimBLEAdvertisingData</code> and old vectors removed.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ab8afd94479ebac3996fa3712d3d92325" title="Set the advertisement data that is to be broadcast in a regular advertisement.">NimBLEAdvertising::setAdvertisementData</a></code> and <code><a class="el" href="class_nim_b_l_e_advertising.html#a97798e6d9d7721eb588c5e67d54e97ef" title="Set the data that is to be provided in a scan response.">NimBLEAdvertising::setScanResponseData</a></code> now return <code>bool</code>, true = success.</li>
<li>Added optional <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a></code> parameter to <code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> to allow for directed advertising to a peer.</li>
<li>All <code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> functions that change data values now return <code>bool</code>, true = success.</li>
<li>All <code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> functions that change data values now return <code>bool</code>, true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#adf8f35c7735f8a29130482b302f04006" title="Set the complete name of this device.">NimBLEAdvertisementData::setName</a></code> now takes an optional <code>bool</code> parameter to indicate if the name is complete or incomplete, default = complete.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> moved to it's own .h and .cpp files.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> takes a new <code>bool restart</code> parameter, default <code>true</code>, that will restart an already in progress scan and clear the duplicate filter so all devices will be discovered again.</li>
<li>Scan response data that is received without advertisement first will now create the device and send a callback.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> will no longer clear cache or results if scanning is already in progress.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> will now allow the start command to be sent with updated parameters if already scanning.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#ad421a09eeb021755b193a7a5e01f183b" title="Clear the stored results of the scan.">NimBLEScan::clearResults</a></code> will now reset the vector capacity to 0.</li>
<li>Host reset will now no longer restart scanning and instead will call <code><a class="el" href="class_nim_b_l_e_scan_callbacks.html#a61c11db405e87ec847066ca3b6ad8375" title="Called when a scan operation ends.">NimBLEScanCallbacks::onScanEnd</a></code>.</li>
<li>Added optional <code>index</code> parameter to <code><a class="el" href="class_nim_b_l_e_advertised_device.html#a74be6cf94bbc2e69d04de25a37d28153" title="Get the data from any type available in the advertisement.">NimBLEAdvertisedDevice::getPayloadByType</a></code></li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Add missing GAP event strings.</li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Add missing return code strings.</li>
<li><code><a class="el" href="class_nim_b_l_e_utils.html" title="A BLE Utility class with methods for debugging and general purpose use.">NimBLEUtils</a></code>: Event/error code strings optimized.</li>
<li><code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a></code> cleanup and optimization.</li>
<li>cleaned up code, removed assert/abort calls, replaced with a configurable option to enable debug asserts.</li>
</ul>
<h2><a class="anchor" id="added-7"></a>
Added</h2>
<ul>
<li>(esp32 specific) <code>NimBLEDevice::setPowerLevel</code> and <code>NimBLEDevice::getPowerLevel</code> which take and return the related <code>esp_power_level*</code> types.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a0e021958df2f2dbf40e52b9022c37594" title="Set the preferred default phy to use for connections.">NimBLEDevice::setDefaultPhy</a></code> which will set the default preferred PHY for all connections.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#acb098c56b7d08636e1745052eb184fb2" title="Get a list of connected clients.">NimBLEDevice::getConnectedClients</a></code>, which returns a vector of pointers to the currently connected client instances.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a0f6521729222f9e55e40325824786070" title="Set the device address to use.">NimBLEDevice::setOwnAddr</a></code> function added, which takes a <code>uint8_t*</code> or <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a>&amp;</code> and will set the mac address of the device, returns <code>bool</code> true = success.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a5071168b3bda69aa4457a43473ad7a96" title="Inject the provided passkey into the Security Manager.">NimBLEDevice::injectPassKey</a></code> Used to send the pairing passkey instead of a return value from the client callback.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aff35384524ab80a19ce1ef23fdcd970b" title="Inject the provided numeric comparison response into the Security Manager.">NimBLEDevice::injectConfirmPasskey</a></code> Used to send the numeric comparison pairing passkey confirmation instead of a return value from the client callback.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a></code> to change the device name after initialization.</li>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#acc3402da680a988f6fa38100d9c98275" title="Create a Characteristic Presentation Format Descriptor for this characteristic.">NimBLECharacteristic::create2904</a></code> which will specifically create a Characteristic Presentation Format (0x2904) descriptor.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ad899be16fa054a01908692a504af9832" title="Refresh advertsing data dynamically without stop/start cycle. For instance allows refreshing manufact...">NimBLEAdvertising::refreshAdvertisingData</a></code> refreshes the advertisement data while still actively advertising.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a165957953c2773dacc6a203c969f6069" title="Request a change to the PHY used for this peer connection.">NimBLEClient::updatePhy</a></code> to request a PHY change with a peer.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a6ca4e212d5b69d4759bd695def020525" title="Get the PHY used for this peer connection.">NimBLEClient::getPhy</a></code> to read the current connection PHY setting.</li>
<li><code>Config</code> struct to <code><a class="el" href="class_nim_b_l_e_client.html" title="A model of a BLE client.">NimBLEClient</a></code> to efficiently set single bit config settings.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a665a5ef97b3ab0307bccc54872d3c218" title="Set or unset a flag to delete this client when disconnected or connection failed.">NimBLEClient::setSelfDelete</a></code> that takes the bool parameters <code>deleteOnDisconnect</code> and <code>deleteOnConnectFail</code>, which will configure the client to delete itself when disconnected or the connection attempt fails.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#ad89d8202400ecb573ce0e2ec5fc801dc" title="Set the client configuration options.">NimBLEClient::setConfig</a></code> and <code><a class="el" href="class_nim_b_l_e_client.html#ac053fba7c84201dc6e7455231cf99f4a" title="Get a copy of the clients configuration.">NimBLEClient::getConfig</a></code> which takes or returns a <code>NimBLEClient::Config</code> object respectively.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#af77b2a5390ea811e9405ff81dba8ecac" title="Cancel an ongoing connection attempt.">NimBLEClient::cancelConnect()</a></code> to cancel an in-progress connection, returns <code>bool</code>, true = success.</li>
<li>Non-blocking <code><a class="el" href="class_nim_b_l_e_client.html#a2b49bc73802bf716cf3df3b5a93f0543" title="Connect to an advertising device.">NimBLEClient::connect</a></code> option added via 2 new <code>bool</code> parameters added to the function:</li>
<li>* <code>asyncConnect</code>; if true, will send the connect command and return immediately.</li>
<li>* <code>exchangeMTU</code>; if true will send the exchange MTU command upon connection.</li>
<li><code><a class="el" href="class_nim_b_l_e_client_callbacks.html#ad0eb6bee07ef8c41dd8924aaca3bc71e" title="Called when a connection attempt fails.">NimBLEClientCallbacks::onConnectFail</a></code> callback that is called when the connection attempt fail while connecting asynchronously.</li>
<li><code><a class="el" href="class_nim_b_l_e_client_callbacks.html#a92662eb9ecf882b2c55bc6d9b4de97bc" title="Called when the connection MTU changes.">NimBLEClientCallbacks::onMTUChange</a></code> callback which will be called when the MTU exchange completes and takes a <code>NimBLEClient*</code> and <code>uint16_t MTU</code> parameter.</li>
<li><code><a class="el" href="class_nim_b_l_e_client_callbacks.html#a4e91ebb66e46b7f3ccc6291ece0b549c" title="Called when the PHY update procedure is complete.">NimBLEClientCallbacks::onPhyUpdate</a></code> and -<code><a class="el" href="class_nim_b_l_e_server_callbacks.html#a5096aa8ec49fe1eddb5d9ab18c112b22" title="Called when the PHY update procedure is complete.">NimBLEServerCallbacks::onPhyUpdate</a></code> Which are called when the PHY update is complete.</li>
<li>Extended scan example.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#abfd159ff5f10848bd611733835ddf215" title="Request an update to the PHY used for a peer connection.">NimBLEServer::updatePhy</a></code> to request a PHY change with a peer.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#a709eb11532ec43a35f8653845b3158fc" title="Get the PHY used for a peer connection.">NimBLEServer::getPhy</a></code> to read the PHY of a peer connection.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#a31f73892bcf7eb66ee540bf1da9c419c" title="Create a client instance from the connection handle.">NimBLEServer::getClient</a></code> which will create a client instance from the provided peer connHandle or connInfo to facilitate reading/write from the connected client.</li>
<li><code><a class="el" href="class_nim_b_l_e_server_callbacks.html#aa6e5e8ef90a537540d9c72f8744c0199" title="Called when connection parameters are updated following a request to update via NimBLEServer::updateC...">NimBLEServerCallbacks::onConnParamsUpdate</a></code> callback.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#a566a9ef25b04e946ac23402bb760cda1" title="Delete peer device from the scan results vector.">NimBLEScan::erase</a></code> overload that takes a <code>const NimBLEAdvertisedDevice*</code> parameter.</li>
<li><code>NimBLEScan::setScanPhy</code> to enable/disable the PHY's to scan on (extended advertising only).</li>
<li><code>NimBLEScan::setScanPeriod</code> which will allow for setting a scan restart timer in the controller (extended advertising only).</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html#a6f55263d4a86d3e2f6b23b71eb68ef98" title="Check if this device is advertising as scannable.">NimBLEAdvertisedDevice::isScannable()</a></code> that returns true if the device is scannable.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html#aabb14f9df146ebe6fb50d74a4ec8a878" title="Get the begin iterator for the payload.">NimBLEAdvertisedDevice::begin</a></code> and <code><a class="el" href="class_nim_b_l_e_advertised_device.html#a8530d1dfdb57cb2f9fc9a917f12797e6" title="Get the end iterator for the payload.">NimBLEAdvertisedDevice::end</a></code> read-only iterators for convenience and use in range loops.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html#a8f4fc5c352487f816598796fb5430865" title="Does this advertisement have a adv type type?">NimBLEAdvertisedDevice::haveType</a></code> Generic use function that returns true if the advertisement data contains a field with the specified type.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a28a6b771e81c043d471d87a6aa5a7622" title="Remove data from the advertisement data.">NimBLEExtAdvertisement::removeData</a></code>, which will remove the data of the specified type from the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a0e7a8731b021ba8813a3a9024171e926" title="Add a service uuid to exposed list of services.">NimBLEExtAdvertisement::addServiceUUID</a></code>, which will append to the service uuids advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a5ddd5bc3a96406518580bc33aab62a84" title="Remove a service UUID from the advertisement.">NimBLEExtAdvertisement::removeServiceUUID</a></code>, which will remove the service from the uuids advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#ab71e5616a011eae51c58b4edfbd3bc71" title="Remove all service UUIDs from the advertisement.">NimBLEExtAdvertisement::removeServices</a></code>, which will remove all service uuids advertised.</li>
<li>New overloads for <code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a2bcfe468c00347e93c0f4ac2b46654be" title="Set the service data advertised for the UUID.">NimBLEExtAdvertisement::setServiceData</a></code> with the parameters <code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid, const uint8_t* data, size_t length</code> and <code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid, const std::vector&lt;uint8_t&gt;&amp; data</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a7cf145aa6be376efaddadc507f5018d0" title="Get the location of the data in the payload.">NimBLEExtAdvertisement::getDataLocation</a></code>, which returns the location in the advertisement data of the type requested in parameter <code>uint8_t type</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_ext_advertisement.html#a54d2bb1e314a975643bcd7d038f1c164" title="Get the string representation of the advertisement data.">NimBLEExtAdvertisement::toString</a></code> which returns a hex string representation of the advertisement data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a1e23657839038e5219f9c009cf360a32" title="Get the current advertisement data.">NimBLEAdvertising::getAdvertisementData</a></code>, which returns a reference to the currently set advertisement data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ae0e7d64d51882830750bcb87e2d9678c" title="Get the current scan response data.">NimBLEAdvertising::getScanData</a></code>, which returns a reference to the currently set scan response data.</li>
<li>New overloads for <code><a class="el" href="class_nim_b_l_e_advertising.html#aba383012133dd694f56cf86966b2d80a" title="Remove a service UUID from the advertisement.">NimBLEAdvertising::removeServiceUUID</a></code> and <code><a class="el" href="class_nim_b_l_e_advertisement_data.html#ad22fa3253134dd5bfd3e76f8c31bef2e" title="Remove a service UUID from the advertisement.">NimBLEAdvertisementData::removeServiceUUID</a></code> to accept a <code>const char*</code></li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ac433e3458ac5259ae21c4bdbd1198781" title="Set the advertised manufacturer data.">NimBLEAdvertising::setManufacturerData</a></code> Overload that takes a <code>const uint8_t*</code> and , size_t<code>parameter. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a><code>Overload that takes</code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid<code>,</code> const uint8_t* data<code>,</code> size_t length<code>as parameters. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a><code>Overload that takes</code>const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a>&amp; uuid<code>,</code>const std::vector&lt;uint8_t&gt;&amp;<code>as parameters. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a710eacfc97ecea1bf9a9a3569c58d410" title="Set the discoverable mode to use.">NimBLEAdvertising::setDiscoverableMode</a><code>to allow applications to control the discoverability of the advertiser. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a3e81d7d3aa2b72b8db58427d4a42727b" title="Set the callback to be invoked when advertising stops.">NimBLEAdvertising::setAdvertisingCompleteCallback</a><code>sets the callback to call when advertising ends. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a9dbb66ca66aa040731fcfd737f881469" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertising::setPreferredParams</a><code>that takes the min and max preferred connection parameters as an alternative for</code>setMinPreferred<code>and</code>setMaxPreferred<code>. -</code><a class="el" href="class_nim_b_l_e_advertising.html#a28c082bb540325ada66b4e203ae6998a" title="Set the advertising interval.">NimBLEAdvertising::setAdvertisingInterval</a><code>Sets the advertisement interval for min and max to the same value instead of calling</code>setMinInterval<code>and</code>setMaxInterval<code>separately if there is not value difference. -</code><a class="el" href="class_nim_b_l_e_advertisement_data.html#acf839da2c36a9ac5ef53e86b57d73874" title="Remove data from the advertisement data.">NimBLEAdvertisementData::removeData</a><code>, which takes a parameter</code>uint8_t type<code>, the data type to remove. -</code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a6ff7fc36a9f5966792f354d2586714a6" title="Get the string representation of the advertisement data.">NimBLEAdvertisementData::toString</a><code>, which will print the data in hex. -</code><a class="el" href="class_nim_b_l_e_utils.html#a6b3a170f26ce51f353ff960f59739181" title="Blocks the calling task until released or timeout.">NimBLEUtils::taskWait</a><code>which causes the calling task to wait for an event. -</code><a class="el" href="class_nim_b_l_e_utils.html#a7b2de1e3827f9f6750550623dc6d9288" title="Release a task.">NimBLEUtils::taskRelease</a><code>releases the task from and event. -</code><a class="el" href="class_nim_b_l_e_utils.html#a6d47cf1adecd01d0102e0feec8232538" title="Generate a random BLE address.">NimBLEUtils::generateAddr</a><code>function added with will generate a random address and takes a</code>bool<code>parameter, true = create non-resolvable private address, otherwise a random static address is created, returns</code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a><code>. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#acf379fca7d3689a73e6750d7ab50a0af" title="Get the uuid value.">NimBLEUUID::getValue</a><code>which returns a read-only</code>uint8_t<code>pointer to the UUID value. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html#a9b96d90463f02f6a21afbaebcc242dd9" title="Reverse the byte order of the UUID.">NimBLEUUID::reverseByteOrder</a><code>, this will reverse the bytes of the UUID, which can be useful for advertising/logging. -</code><a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a><code>constructor overload that takes a reference to</code>ble_uuid_any_t<code>. -</code><a class="el" href="class_nim_b_l_e_address.html#a9af65abe3c02a16307b8cffa3b1bcac1" title="Determine if this address is a Non-Resolvable Private Address.">NimBLEAddress::isNrpa</a><code>method to test if an address is random non-resolvable. -</code><a class="el" href="class_nim_b_l_e_address.html#a409e3ef141526c8f5c5fad99bd95b660" title="Determine if this address is a Static Address.">NimBLEAddress::isStatic</a><code>method to test if an address is random static. -</code><a class="el" href="class_nim_b_l_e_address.html#a7154780415ae201a1fcdf86298b6116c" title="Determine if this address is a Public Address.">NimBLEAddress::isPublic</a><code>method to test if an address is a public address. -</code><a class="el" href="class_nim_b_l_e_address.html#aa05f35ab6724a00c65dd096006dba2bb" title="Determine if this address is a NULL Address.">NimBLEAddress::isNull</a><code>methods to test if an address is NULL. -</code>NimBLEAddress::getValue<code>method which returns a read-only pointer to the address value. -</code><a class="el" href="class_nim_b_l_e_address.html#a0f390fb5f422db8ced1938bd40f87c4d" title="Reverse the byte order of the address.">NimBLEAddress::reverseByteOrder</a><code>method which will reverse the byte order of the address value. -</code>NimBLEHIDDevice::batteryLevel<code>returns the HID device battery level characteristic. -</code><a class="el" href="class_nim_b_l_e_beacon.html#ab6475aaa5d8a93e24401da3b4b272496" title="Set the beacon data.">NimBLEBeacon::setData</a><code>overload that takes</code>uint8_t* data<code>and</code>uint8_t length<code>. -</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#abda5099d23c7111e99d8d755565be84a" title="Get the PnP characteristic.">NimBLEHIDDevice::getPnp</a><code>function added to access the pnp characteristic. -</code><a class="el" href="class_nim_b_l_e_h_i_d_device.html#a21aa774e08a344fc98e217c79c9ddf12" title="Get the HID information characteristic.">NimBLEHIDDevice::getHidInfo</a>` function added to access the hid info characteristic.</li>
</ul>
<h1><a class="anchor" id="autotoc_md143-2024-11-27"></a>
[1.4.3] 2024-11-27</h1>
<h2><a class="anchor" id="fixed-16"></a>
Fixed</h2>
<ul>
<li>BT5 examples for non-esp devices.</li>
<li>Build errors when configured as a non-connecting device</li>
</ul>
<h2><a class="anchor" id="added-8"></a>
Added</h2>
<ul>
<li>Coded PHY support for nRF52833 and nRF52820</li>
</ul>
<h1><a class="anchor" id="autotoc_md142-2024-06-17"></a>
[1.4.2] 2024-06-17</h1>
<h2><a class="anchor" id="fixed-17"></a>
Fixed</h2>
<ul>
<li><code>CONFIG_BT_NIMBLE_NVS_PERSIST</code> value not being used to enable/disable persistance.</li>
<li>Set service handle in <code><a class="el" href="class_nim_b_l_e_attribute.html#a7907cb5b0a2d0f8cd9eb016a4ed876d1" title="Get the handle of the attribute.">NimBLEService::getHandle</a></code> function if not set already.</li>
<li>NimBLE_service_data_advertiser example updated to initialize the advertising pointer after stack initialization.</li>
<li>Unhandled exception on <code>NimBLECharacteristic::handleGapEvent</code> when the connection handle is invalid.</li>
<li><code>NimBLEHIDDevice::pnp</code> now correctly sets the byte order.</li>
<li><code><a class="el" href="class_nim_b_l_e_eddystone_t_l_m.html" title="Representation of a beacon. See:">NimBLEEddystoneTLM</a></code> now correctly sets/gets negative temperatures.</li>
<li>Adding to the whitelist will now allow the device to be added again if the previous attempts failed.</li>
<li>The IPC calls added to esp_nimble_hci have been removed to prevent IPC stack crashing.</li>
<li>Espressif log tag renamed from "TAG" to "LOG_TAG" to avoid conflict with Arduino core definition.</li>
<li>Removed broken links in docs</li>
</ul>
<h2><a class="anchor" id="added-9"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a></code> new method: <code>getAdvFlags</code>, to read the flags advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ac433e3458ac5259ae21c4bdbd1198781" title="Set the advertised manufacturer data.">NimBLEAdvertising::setManufacturerData</a></code> new overload method that accepts a vector of <code>uint8_t</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a0b076298058755149b4351727d70b198" title="Set manufacturer specific data.">NimBLEAdvertisementData::setManufacturerData</a></code> new overload method that accepts a vector of <code>uint8_t</code>.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a></code> new method: <code>getPayloadByType</code>, to get data from generic data types advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_service.html" title="The model of a BLE service.">NimBLEService</a></code> new method: <code>isStarted</code>, checks if the service has been started.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> new method: <code>removeServices</code> removes all service UUID's from the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> new method: <code>clearData</code> sets all data to NULL to reuse the instance.</li>
</ul>
<h2><a class="anchor" id="changed-8"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html#aaf936703902681e7af785d7b751e68e0" title="Get the manufacturer data.">NimBLEAdvertisedDevice::getManufacturerData</a></code>, now takes an index value parameter to use when there is more than 1 instance of manufacturer data.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> directed peer address parameter to advertising start.</li>
<li>Update NimBLE core to esp-nimble @0fc6282</li>
<li>Can now create more than 255 Characteristics/Descriptors in a service.</li>
<li><code>nimble_port_freertos_get_hs_hwm</code> function is now available to the application to get the core task stack usage.</li>
<li>changed default pairing keys shared to include ID key which is now needed by iOS</li>
<li>Removed abort in server start when a service is not found, logs a warning message instead.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> on complete callback is now a std::function to allow the use of std::bind to class methods</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> setXXX methods will now properly clear the previous data before setting the new values.</li>
<li>Removed asserts in <code><a class="el" href="class_nim_b_l_e_characteristic.html" title="The model of a BLE Characteristic.">NimBLECharacteristic</a></code> event handler when conn_handle is invalid, sends a NULL conn info to the callback instead.</li>
</ul>
<h1><a class="anchor" id="autotoc_md141---2022-10-23"></a>
[1.4.1] - 2022-10-23</h1>
<h2><a class="anchor" id="fixed-18"></a>
Fixed</h2>
<ul>
<li>Compile warning removed for esp32c3</li>
<li><a class="el" href="class_nim_b_l_e_device.html#a58742d313c683b98b47396383cb6ddfa" title="Get the transmission power.">NimBLEDevice::getPower</a> incorrect value when power level is -3db.</li>
<li>Failed pairing when already in progress.</li>
</ul>
<h2><a class="anchor" id="changed-9"></a>
Changed</h2>
<ul>
<li>Revert previous change that forced writing with response when subscribing in favor of allowing the application to decide.</li>
</ul>
<h2><a class="anchor" id="added-10"></a>
Added</h2>
<ul>
<li>Added NimBLEHIDDevice::batteryLevel.</li>
<li>Added <a class="el" href="class_nim_b_l_e_device.html#aaa64b6baff54c010eb8b4d0ba338cc01" title="Set the BLEDevice name.">NimBLEDevice::setDeviceName</a> allowing for changing the device name while the BLE stack is active.</li>
<li>CI build tests.</li>
<li>Missing items in CHANGELOG that were not recorded correctly</li>
</ul>
<h1><a class="anchor" id="autotoc_md140---2022-07-10"></a>
[1.4.0] - 2022-07-10</h1>
<h2><a class="anchor" id="fixed-19"></a>
Fixed</h2>
<ul>
<li>Fixed missing data from long notification values.</li>
<li>Fixed NimbleCharacteristicCallbacks::onRead not being called when a non-long read command is received.</li>
</ul>
<h2><a class="anchor" id="changed-10"></a>
Changed</h2>
<ul>
<li>Updated NimBLE core to use the v1.4.0 branch of esp-nimble.</li>
<li>AD flags are no longer set in the advertisements of non-connectable beacons, freeing up 3 bytes of advertisement room.</li>
<li>Config option CONFIG_BT_NIMBLE_DEBUG replaced with CONFIG_BT_NIMBLE_LOG_LEVEL (see <a class="el" href="nimconfig_8h_source.html">src/nimconfig.h</a> for usage)</li>
<li>Config option CONFIG_NIMBLE_CPP_ENABLE_ADVERTISMENT_TYPE_TEXT renamed to CONFIG_NIMBLE_CPP_ENABLE_ADVERTISEMENT_TYPE_TEXT</li>
<li>Config option CONFIG_BT_NIMBLE_TASK_STACK_SIZE renamed to CONFIG_BT_NIMBLE_HOST_TASK_STACK_SIZE</li>
</ul>
<h2><a class="anchor" id="added-11"></a>
Added</h2>
<ul>
<li>Preliminary support for non-esp devices, NRF51 and NRF52 devices supported with <a href="https://github.com/h2zero/n-able-Arduino">n-able arduino core</a></li>
<li>Alias added for <code><a class="el" href="class_nim_b_l_e_server_callbacks.html#ab702f73e739b4df72e191f47056c01ff" title="Called when the connection MTU changes.">NimBLEServerCallbacks::onMTUChange</a></code> to <code>onMtuChanged</code> in order to support porting code from original library.</li>
<li><code><a class="el" href="class_nim_b_l_e_att_value.html" title="A specialized container class to hold BLE attribute values.">NimBLEAttValue</a></code> Class added to reduce and control RAM footprint of characteristic/descriptor values and support conversions from Arduino Strings and many other data types.</li>
<li>Bluetooth 5 extended advertising support for capable devices. CODED Phy, 2M Phy, extended advertising data, and multi-advertising are supported, periodic advertising will be implemented in the future.</li>
</ul>
<h1><a class="anchor" id="autotoc_md138---2022-04-27"></a>
[1.3.8] - 2022-04-27</h1>
<h2><a class="anchor" id="fixed-20"></a>
Fixed</h2>
<ul>
<li>Fix compile error with ESP32S3.</li>
<li>Prevent a potential crash when retrieving characteristics from a service if the result was successful but no characteristics found.</li>
</ul>
<h2><a class="anchor" id="changed-11"></a>
Changed</h2>
<ul>
<li>Save resources when retrieving descriptors if the characteristic handle is the same as the end handle (no descriptors).</li>
<li>Subscribing to characteristic notifications/indications will now always use write with response, as per BLE specifications.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a1019178a12799ca2c3a84f523b3a7db9" title="Retrieves the full database of attributes that the peripheral has available.">NimBLEClient::discoverAttributes</a></code> now returns a bool value to indicate success/failure</li>
</ul>
<h1><a class="anchor" id="autotoc_md137---2022-02-15"></a>
[1.3.7] - 2022-02-15</h1>
<h2><a class="anchor" id="fixed-21"></a>
Fixed</h2>
<ul>
<li>Crash when retrieving an attribute that does not exist on the peer.</li>
<li>Memory leak when deleting client instances.</li>
<li>Compilation errors for esp32s3</li>
</ul>
<h1><a class="anchor" id="autotoc_md136---2022-01-18"></a>
[1.3.6] - 2022-01-18</h1>
<h2><a class="anchor" id="changed-12"></a>
Changed</h2>
<ul>
<li>When retrieving attributes from a server fails with a 128bit UUID containing the ble base UUID another attempt will be made with the 16bit version of the UUID.</li>
</ul>
<h2><a class="anchor" id="fixed-22"></a>
Fixed</h2>
<ul>
<li>Memory leak when services are changed on server devices.</li>
<li>Rare crashing that occurs when BLE commands are sent from ISR context using IPC.</li>
<li>Crashing caused by uninitialized disconnect timer in client.</li>
<li>Potential crash due to uninitialized advertising callback pointer.</li>
</ul>
<h1><a class="anchor" id="autotoc_md135---2022-01-14"></a>
[1.3.5] - 2022-01-14</h1>
<h2><a class="anchor" id="added-12"></a>
Added</h2>
<ul>
<li>CONFIG_NIMBLE_CPP_DEBUG_LEVEL macro in <a class="el" href="nimconfig_8h_source.html">nimconfig.h</a> to allow setting the log level separately from the Arduino core log level.</li>
</ul>
<h2><a class="anchor" id="fixed-23"></a>
Fixed</h2>
<ul>
<li>Memory leak when initializing/deinitializing the BLE stack caused by new FreeRTOS timers be created on each initialization.</li>
</ul>
<h1><a class="anchor" id="autotoc_md134---2022-01-09"></a>
[1.3.4] - 2022-01-09</h1>
<h2><a class="anchor" id="fixed-24"></a>
Fixed</h2>
<ul>
<li>Workaround for latest Arduino-esp32 core that causes tasks not to block when required, which caused functions to return prematurely resulting in exceptions/crashing.</li>
<li>The wrong length value was being used to set the values read from peer attributes. This has been corrected to use the proper value size.</li>
</ul>
<h1><a class="anchor" id="autotoc_md133---2021-11-24"></a>
[1.3.3] - 2021-11-24</h1>
<h2><a class="anchor" id="fixed-25"></a>
Fixed</h2>
<ul>
<li>Workaround added for FreeRTOS bug that affected timers, causing scan and advertising timer expirations to not correctly trigger callbacks.</li>
</ul>
<h1><a class="anchor" id="autotoc_md132---2021-11-20"></a>
[1.3.2] - 2021-11-20</h1>
<h2><a class="anchor" id="fixed-26"></a>
Fixed</h2>
<ul>
<li>Added missing macros for scan filter.</li>
</ul>
<h2><a class="anchor" id="added-13"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_client.html#aeb0593ebffa7e8833e5854480e41cce5" title="Get the last error code reported by the NimBLE host.">NimBLEClient::getLastError</a></code> : Gets the error code of the last function call that produces a return code from the stack.</li>
</ul>
<h1><a class="anchor" id="autotoc_md131---2021-08-04"></a>
[1.3.1] - 2021-08-04</h1>
<h2><a class="anchor" id="fixed-27"></a>
Fixed</h2>
<ul>
<li>Corrected a compiler/linker error when an application or a library uses bluetooth classic due to the redefinition of <code>btInUse</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md130---2021-08-02"></a>
[1.3.0] - 2021-08-02</h1>
<h2><a class="anchor" id="added-14"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#a2c0ed8932ee257a8632e3d72e353489b" title="Remove a descriptor from the characteristic.">NimBLECharacteristic::removeDescriptor</a></code>: Dynamically remove a descriptor from a characteristic. Takes effect after all connections are closed and sends a service changed indication.</li>
<li><code><a class="el" href="class_nim_b_l_e_service.html#af992d0c27e3a559789fb77fc46623234" title="Remove a characteristic from the service.">NimBLEService::removeCharacteristic</a></code>: Dynamically remove a characteristic from a service. Takes effect after all connections are closed and sends a service changed indication</li>
<li><code><a class="el" href="class_nim_b_l_e_server_callbacks.html#ab702f73e739b4df72e191f47056c01ff" title="Called when the connection MTU changes.">NimBLEServerCallbacks::onMTUChange</a></code>: This is callback is called when the MTU is updated after connection with a client.</li>
<li>ESP32C3 support</li>
<li>Whitelist API:<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#aabc68166b6dd4a744a98f94e569f37db" title="Add a peer address to the whitelist.">NimBLEDevice::whiteListAdd</a></code>: Add a device to the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a81abbad5e371fe1cdd91c002b42cc654" title="Remove a peer address from the whitelist.">NimBLEDevice::whiteListRemove</a></code>: Remove a device from the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ae51e2d4d6169a61133178a1b0d6b5b45" title="Checks if a peer device is whitelisted.">NimBLEDevice::onWhiteList</a></code>: Check if the device is on the whitelist.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ab28cc2ec59fc9e62d05826633f53d2a0" title="Gets the count of addresses in the whitelist.">NimBLEDevice::getWhiteListCount</a></code>: Gets the size of the whitelist</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a4a2229e9e517b84773e65c75124b0789" title="Gets the address at the vector index.">NimBLEDevice::getWhiteListAddress</a></code>: Get the address of a device on the whitelist by index value.</li>
</ul>
</li>
<li>Bond management API:<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a7fe0f568c17130150660e6307851be48" title="Gets the number of bonded peers stored.">NimBLEDevice::getNumBonds</a></code>: Gets the number of bonds stored.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a16bf4f5394735ed8d7f0bb32ca5d269a" title="Checks if a peer device is bonded.">NimBLEDevice::isBonded</a></code>: Checks if the device is bonded.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a17fe75ad9d4f3d8cfd876b4a9bf70bb0" title="Deletes all bonding information.">NimBLEDevice::deleteAllBonds</a></code>: Deletes all bonds.</li>
<li><code><a class="el" href="class_nim_b_l_e_device.html#ac7f090f4b1a2d593f38b20859e071f0c" title="Get the address of a bonded peer device by index.">NimBLEDevice::getBondedAddress</a></code>: Gets the address of a bonded device by the index value.</li>
</ul>
</li>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#ac194f58f909f9e447949a41c2a7cdf00" title="Get the callback handlers for this characteristic.">NimBLECharacteristic::getCallbacks</a></code> to retrieve the current callback handler.</li>
<li>Connection Information class: <code><a class="el" href="class_nim_b_l_e_conn_info.html" title="Connection information.">NimBLEConnInfo</a></code>.</li>
<li><code>NimBLEScan::clearDuplicateCache</code>: This can be used to reset the cache of advertised devices so they will be immediately discovered again.</li>
</ul>
<h2><a class="anchor" id="changed-13"></a>
Changed</h2>
<ul>
<li>FreeRTOS files have been removed as they are not used by the library.</li>
<li>Services, characteristics and descriptors can now be created statically and added after.</li>
<li>Excess logging and some asserts removed.</li>
<li>Use ESP_LOGx macros to enable using local log level filtering.</li>
</ul>
<h2><a class="anchor" id="fixed-28"></a>
Fixed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_characteristic_callbacks.html#a024951384bb777d7ee71bfd1d5eff185" title="Callback function called when a client changes subscription status.">NimBLECharacteristicCallbacks::onSubscribe</a></code> Is now called after the connection is added to the vector.</li>
<li>Corrected bonding failure when reinitializing the BLE stack.</li>
<li>Writing to a characteristic with a std::string value now correctly writes values with null characters.</li>
<li>Retrieving remote descriptors now uses the characteristic end handle correctly.</li>
<li>Missing data in long writes to remote descriptors.</li>
<li>Hanging on task notification when sending an indication from the characteristic callback.</li>
<li>BLE controller memory could be released when using Arduino as a component.</li>
<li>Compile errors with NimBLE release 1.3.0.</li>
</ul>
<h1><a class="anchor" id="autotoc_md120---2021-02-08"></a>
[1.2.0] - 2021-02-08</h1>
<h2><a class="anchor" id="added-15"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_characteristic.html#a283bd1661b5865dd247b1b59bcbf46d6" title="Return the BLE Descriptor for the given handle.">NimBLECharacteristic::getDescriptorByHandle</a></code>: Return the BLE Descriptor for the given handle.</li>
<li><code>NimBLEDescriptor::getStringValue</code>: Get the value of this descriptor as a string.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#a0b009a568399014462a5ba7700b0129e" title="Get a BLE Service by its handle.">NimBLEServer::getServiceByHandle</a></code>: Get a service by its handle.</li>
<li><code><a class="el" href="class_nim_b_l_e_service.html#a488df9c39d1c49d4b1537abddddb1a7d" title="Get a pointer to the characteristic object with the specified handle.">NimBLEService::getCharacteristicByHandle</a></code>: Get a pointer to the characteristic object with the specified handle.</li>
<li><code><a class="el" href="class_nim_b_l_e_service.html#a8219ccefd97180bee485b62572c62e58">NimBLEService::getCharacteristics</a></code>: Get the vector containing pointers to each characteristic associated with this service. Overloads to get a vector containing pointers to all the characteristics in a service with the UUID. (supports multiple same UUID's in a service)<ul>
<li><code>NimBLEService::getCharacteristics(const char *uuid)</code></li>
<li><code><a class="el" href="class_nim_b_l_e_service.html#a8219ccefd97180bee485b62572c62e58">NimBLEService::getCharacteristics</a>(const <a class="el" href="class_nim_b_l_e_u_u_i_d.html" title="A model of a BLE UUID.">NimBLEUUID</a> &amp;uuid)</code></li>
</ul>
</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html" title="Advertisement data set by the programmer to be published by the BLE server.">NimBLEAdvertisementData</a></code> New methods:<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a3f227c597ec00f639e4bd26b80ce404b" title="Adds Tx power level to the advertisement data.">NimBLEAdvertisementData::addTxPower</a></code>: Adds transmission power to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#acee3a78f4c8d69a1dc3df1f9af16632f" title="Set the preferred min and max connection intervals to advertise.">NimBLEAdvertisementData::setPreferredParams</a></code>: Adds connection parameters to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertisement_data.html#a852969e05a7884faf6cfcd2001f80ec9" title="Set the URI to advertise.">NimBLEAdvertisementData::setURI</a></code>: Adds URI data to the advertisement.</li>
</ul>
</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> New methods:<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a7fb4b74eb7acb1f46e57ff772baccd88" title="Set the advertised name of the device.">NimBLEAdvertising::setName</a></code>: Set the name advertised.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#ac433e3458ac5259ae21c4bdbd1198781" title="Set the advertised manufacturer data.">NimBLEAdvertising::setManufacturerData</a></code>: Adds manufacturer data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a9fe23a52ac3f699095d84d2ba8f90c28" title="Set the advertised URI.">NimBLEAdvertising::setURI</a></code>: Adds URI data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a815faed49fb4f29337fda94bd39c0bbc" title="Set the service data advertised for the UUID.">NimBLEAdvertising::setServiceData</a></code>: Adds service data to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a0d3c5cb3a93416a4206abb1f8e443ebf" title="Add the transmission power level to the advertisement packet.">NimBLEAdvertising::addTxPower</a></code>: Adds transmission power to the advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a91cde5680de36840fc18f6fd76665af7" title="Stops the current advertising and resets the advertising data to the default values.">NimBLEAdvertising::reset</a></code>: Stops the current advertising and resets the advertising data to the default values.</li>
</ul>
</li>
<li><code>NimBLEDevice::setScanFilterMode</code>: Set the controller duplicate filter mode for filtering scanned devices.</li>
<li><code>NimBLEDevice::setScanDuplicateCacheSize</code>: Sets the number of advertisements filtered before the cache is reset.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html#aad9cd2462d00d7c0fa39d095aa2d8e81" title="Sets the max number of results to store.">NimBLEScan::setMaxResults</a></code>: This allows for setting a maximum number of advertised devices stored in the results vector.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a></code> New data retrieval methods added:<ul>
<li><code>haveAdvInterval/getAdvInterval</code>: checks if the interval is advertised / gets the advertisement interval value.</li>
<li><code>haveConnParams/getMinInterval/getMaxInterval</code>: checks if the parameters are advertised / get min value / get max value.</li>
<li><code>haveURI/getURI</code>: checks if a URI is advertised / gets the URI data.</li>
<li><code>haveTargetAddress/getTargetAddressCount/getTargetAddress(index)</code>: checks if a target address is present / gets a count of the addresses targeted / gets the address of the target at index.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="changed-14"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="nimconfig_8h_source.html">nimconfig.h</a></code> (Arduino) is now easier to use.</li>
<li><code><a class="el" href="class_nim_b_l_e_server.html#a26af61c030e9ad1108b24df4d3b6b633" title="Get a BLE Service by its UUID.">NimBLEServer::getServiceByUUID</a></code> Now takes an extra parameter of instanceID to support multiple services with the same UUID.</li>
<li><code><a class="el" href="class_nim_b_l_e_service.html#aeeaa4b0c543230e7819ad92d48432f5e" title="Get a pointer to the characteristic object with the specified UUID.">NimBLEService::getCharacteristic</a></code> Now takes an extra parameter of instanceID to support multiple characteristics with the same UUID.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Transmission power is no longer advertised by default and can be added to the advertisement by calling <code><a class="el" href="class_nim_b_l_e_advertising.html#a0d3c5cb3a93416a4206abb1f8e443ebf" title="Add the transmission power level to the advertisement packet.">NimBLEAdvertising::addTxPower</a></code></li>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> Custom scan response data can now be used without custom advertisement.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html" title="Perform and manage BLE scans.">NimBLEScan</a></code> Now uses the controller duplicate filter.</li>
<li><code><a class="el" href="class_nim_b_l_e_advertised_device.html" title="A representation of a BLE advertised device found by a scan.">NimBLEAdvertisedDevice</a></code> Has been refactored to store the complete advertisement payload and no longer parses the data from each advertisement. Instead the data will be parsed on-demand when the user application asks for specific data.</li>
</ul>
<h2><a class="anchor" id="fixed-29"></a>
Fixed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_h_i_d_device.html" title="A model of a BLE Human Interface Device.">NimBLEHIDDevice</a></code> Characteristics now use encryption, this resolves an issue with communicating with devices requiring encryption for HID devices.</li>
</ul>
<h1><a class="anchor" id="autotoc_md110---2021-01-20"></a>
[1.1.0] - 2021-01-20</h1>
<h2><a class="anchor" id="added-16"></a>
Added</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_device.html#a31acb43c150014f06bad74b57c2335ff" title="Sets the address type to use.">NimBLEDevice::setOwnAddrType</a></code> added to enable the use of random and random-resolvable addresses, by asukiaaa</li>
<li>New examples for securing and authenticating client/server connections, by mblasee.</li>
<li><code>NimBLEAdvertising::SetMinPreferred</code> and <code>NimBLEAdvertising::SetMinPreferred</code> re-added.</li>
<li>Conditional checks added for command line config options in <code><a class="el" href="nimconfig_8h_source.html">nimconfig.h</a></code> to support custom configuration in platformio.</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a967d0c75083706f336f2283eac6d0de2" title="Set the value of a specific characteristic associated with a specific service.">NimBLEClient::setValue</a></code> Now takes an extra bool parameter <code>response</code> to enable the use of write with response (default = false).</li>
<li><code><a class="el" href="class_nim_b_l_e_client.html#a6b801e91a37745445499dadfb4c38597" title="Get the remote characteristic with the specified handle.">NimBLEClient::getCharacteristic(uint16_t handle)</a></code> Enabling the use of the characteristic handle to be used to find the <a class="el" href="class_nim_b_l_e_remote_characteristic.html" title="A model of a remote BLE characteristic.">NimBLERemoteCharacteristic</a> object.</li>
<li><code><a class="el" href="class_nim_b_l_e_h_i_d_device.html" title="A model of a BLE Human Interface Device.">NimBLEHIDDevice</a></code> class added by wakwak-koba.</li>
<li><code><a class="el" href="class_nim_b_l_e_server_callbacks.html#a4622b24e5553cc7961c04ab25b63d943" title="Handle a client disconnection. This is called when a client disconnects.">NimBLEServerCallbacks::onDisconnect</a></code> overloaded callback added to provide a ble_gap_conn_desc parameter for the application to obtain information about the disconnected client.</li>
<li>Conditional checks in <code><a class="el" href="nimconfig_8h_source.html">nimconfig.h</a></code> for command line defined macros to support platformio config settings.</li>
</ul>
<h2><a class="anchor" id="changed-15"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> now returns a bool value to indicate success/failure.</li>
<li>Some asserts were removed in <code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> and replaced with better return code handling and logging.</li>
<li>If a host reset event occurs, scanning and advertising will now only be restarted if their previous duration was indefinite.</li>
<li><code><a class="el" href="class_nim_b_l_e_remote_characteristic.html#adf445e6bd9dee047a61c708ae943304a" title="Subscribe for notifications or indications.">NimBLERemoteCharacteristic::subscribe</a></code> and <code>NimBLERemoteCharacteristic::registerForNotify</code> will now set the callback regardless of the existence of the CCCD and return true unless the descriptor write operation failed.</li>
<li>Advertising tx power level is now sent in the advertisement packet instead of scan response.</li>
<li><code><a class="el" href="class_nim_b_l_e_scan.html" title="Perform and manage BLE scans.">NimBLEScan</a></code> When the scan ends the scan stopped flag is now set before calling the scan complete callback (if used) this allows the starting of a new scan from the callback function.</li>
</ul>
<h2><a class="anchor" id="fixed-30"></a>
Fixed</h2>
<ul>
<li>Sometimes <code><a class="el" href="class_nim_b_l_e_client.html#a2b49bc73802bf716cf3df3b5a93f0543" title="Connect to an advertising device.">NimBLEClient::connect</a></code> would hang on the task block if no event arrived to unblock. A time limit has been added to timeout appropriately.</li>
<li>When getting descriptors for a characteristic the end handle of the service was used as a proxy for the characteristic end handle. This would be rejected by some devices and has been changed to use the next characteristic handle as the end when possible.</li>
<li>An exception could occur when deleting a client instance if a notification arrived while the attribute vectors were being deleted. A flag has been added to prevent this.</li>
<li>An exception could occur after a host reset event when the host re-synced if the tasks that were stopped during the event did not finish processing. A yield has been added after re-syncing to allow tasks to finish before proceeding.</li>
<li>Occasionally the controller would fail to send a disconnected event causing the client to indicate it is connected and would be unable to reconnect. A timer has been added to reset the host/controller if it expires.</li>
<li>Occasionally the call to start scanning would get stuck in a loop on BLE_HS_EBUSY, this loop has been removed.</li>
<li>16bit and 32bit UUID's in some cases were not discovered or compared correctly if the device advertised them as 16/32bit but resolved them to 128bits. Both are now checked.</li>
<li><code>FreeRTOS</code> compile errors resolved in latest Arduino core and IDF v3.3.</li>
<li>Multiple instances of <code>time()</code> called inside critical sections caused sporadic crashes, these have been moved out of critical regions.</li>
<li>Advertisement type now correctly set when using non-connectable (advertiser only) mode.</li>
<li>Advertising payload length correction, now accounts for appearance.</li>
<li>(Arduino) Ensure controller mode is set to BLE Only.</li>
</ul>
<h1><a class="anchor" id="autotoc_md102---2020-09-13"></a>
[1.0.2] - 2020-09-13</h1>
<h2><a class="anchor" id="changed-16"></a>
Changed</h2>
<ul>
<li><code><a class="el" href="class_nim_b_l_e_advertising.html#a8a5c880ee36fd44e0c72c14c47c8e15e" title="Start advertising.">NimBLEAdvertising::start</a></code> Now takes 2 optional parameters, the first is the duration to advertise for (in seconds), the second is a callback that is invoked when advertising ends and takes a pointer to a <code><a class="el" href="class_nim_b_l_e_advertising.html" title="Perform and manage BLE advertising.">NimBLEAdvertising</a></code> object (similar to the <code><a class="el" href="class_nim_b_l_e_scan.html#ac1307f30a881688d3a4d57bac7abe02c" title="Start scanning.">NimBLEScan::start</a></code> API).</li>
<li>(Arduino) Maximum BLE connections can now be altered by only changing the value of <code>CONFIG_BT_NIMBLE_MAX_CONNECTIONS</code> in <code><a class="el" href="nimconfig_8h_source.html">nimconfig.h</a></code>. Any changes to the controller max connection settings in <code>sdkconfig.h</code> will now have no effect when using this library.</li>
<li>(Arduino) Revert the previous change to fix the advertising start delay. Instead a replacement fix that routes all BLE controller commands from a task running on core 0 (same as the controller) has been implemented. This improves response times and reliability for all BLE functions.</li>
</ul>
<h1><a class="anchor" id="autotoc_md101---2020-09-02"></a>
[1.0.1] - 2020-09-02</h1>
<h2><a class="anchor" id="added-17"></a>
Added</h2>
<ul>
<li>Empty <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress</a></code> constructor: <code><a class="el" href="class_nim_b_l_e_address.html" title="A BLE device address.">NimBLEAddress()</a></code> produces an address of 00:00:00:00:00:00 type 0.</li>
<li>Documentation of the difference of NimBLEAddress::getNative vs the original bluedroid library.</li>
</ul>
<h2><a class="anchor" id="changed-17"></a>
Changed</h2>
<ul>
<li>notify_callback typedef is now defined as std::function to enable the use of std::bind to call a class member function.</li>
</ul>
<h2><a class="anchor" id="fixed-31"></a>
Fixed</h2>
<ul>
<li>Fix advertising start delay when first called.</li>
</ul>
<h1><a class="anchor" id="autotoc_md100---2020-08-22"></a>
[1.0.0] - 2020-08-22</h1>
<p>First stable release.</p>
<p>All the original library functionality is complete and many extras added with full documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
