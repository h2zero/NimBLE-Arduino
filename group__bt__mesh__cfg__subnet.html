<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NimBLE-Arduino: Bluetooth Mesh Subnet Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NimBLE-Arduino<span id="projectnumber">&#160;2.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__bt__mesh__cfg__subnet.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Bluetooth Mesh Subnet Configuration<div class="ingroups"><a class="el" href="group__bt__mesh.html">Bluetooth Mesh</a> &raquo; <a class="el" href="group__bt__mesh__cfg.html">Bluetooth Mesh Runtime Configuration</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Bluetooth Mesh Subnet Configuration.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f" id="r_ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f">bt_mesh_subnet_add</a> (uint16_t net_idx, const uint8_t key[16])</td></tr>
<tr class="memdesc:ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a Subnet.  <br /></td></tr>
<tr class="separator:ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47236f48940303be27fa6af4797424c2" id="r_ga47236f48940303be27fa6af4797424c2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#ga47236f48940303be27fa6af4797424c2">bt_mesh_subnet_update</a> (uint16_t net_idx, const uint8_t key[16])</td></tr>
<tr class="memdesc:ga47236f48940303be27fa6af4797424c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the given Subnet.  <br /></td></tr>
<tr class="separator:ga47236f48940303be27fa6af4797424c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaec9d827d5f026b473f3ac88988d3c842" id="r_gaec9d827d5f026b473f3ac88988d3c842"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#gaec9d827d5f026b473f3ac88988d3c842">bt_mesh_subnet_del</a> (uint16_t net_idx)</td></tr>
<tr class="memdesc:gaec9d827d5f026b473f3ac88988d3c842"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a Subnet.  <br /></td></tr>
<tr class="separator:gaec9d827d5f026b473f3ac88988d3c842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad48780acaae085350a8b48d033717bfa" id="r_gad48780acaae085350a8b48d033717bfa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#gad48780acaae085350a8b48d033717bfa">bt_mesh_subnet_exists</a> (uint16_t net_idx)</td></tr>
<tr class="memdesc:gad48780acaae085350a8b48d033717bfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a Subnet is known.  <br /></td></tr>
<tr class="separator:gad48780acaae085350a8b48d033717bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef15af43e74e3c71590c63c5f1e3ea55" id="r_gaef15af43e74e3c71590c63c5f1e3ea55"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#gaef15af43e74e3c71590c63c5f1e3ea55">bt_mesh_subnet_kr_phase_set</a> (uint16_t net_idx, uint8_t *phase)</td></tr>
<tr class="memdesc:gaef15af43e74e3c71590c63c5f1e3ea55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Subnet's Key Refresh phase.  <br /></td></tr>
<tr class="separator:gaef15af43e74e3c71590c63c5f1e3ea55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad251907892150649f3f1ae6b4112cd84" id="r_gad251907892150649f3f1ae6b4112cd84"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#gad251907892150649f3f1ae6b4112cd84">bt_mesh_subnet_kr_phase_get</a> (uint16_t net_idx, uint8_t *phase)</td></tr>
<tr class="memdesc:gad251907892150649f3f1ae6b4112cd84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Subnet's Key Refresh phase.  <br /></td></tr>
<tr class="separator:gad251907892150649f3f1ae6b4112cd84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59bf9f022665edc0ad03267e4bd16632" id="r_ga59bf9f022665edc0ad03267e4bd16632"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#ga59bf9f022665edc0ad03267e4bd16632">bt_mesh_subnet_node_id_set</a> (uint16_t net_idx, enum <a class="el" href="group__bt__mesh__cfg.html#ga0a3557a71597885a31cf209c6b83cedb">bt_mesh_feat_state</a> node_id)</td></tr>
<tr class="memdesc:ga59bf9f022665edc0ad03267e4bd16632"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Node Identity state of the Subnet.  <br /></td></tr>
<tr class="separator:ga59bf9f022665edc0ad03267e4bd16632"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga683d1f9abe82649a774b3d53dcaced8e" id="r_ga683d1f9abe82649a774b3d53dcaced8e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#ga683d1f9abe82649a774b3d53dcaced8e">bt_mesh_subnet_node_id_get</a> (uint16_t net_idx, enum <a class="el" href="group__bt__mesh__cfg.html#ga0a3557a71597885a31cf209c6b83cedb">bt_mesh_feat_state</a> *node_id)</td></tr>
<tr class="memdesc:ga683d1f9abe82649a774b3d53dcaced8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Node Identity state of the Subnet.  <br /></td></tr>
<tr class="separator:ga683d1f9abe82649a774b3d53dcaced8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fd04bff5423a36b013089a4ba351d67" id="r_ga0fd04bff5423a36b013089a4ba351d67"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bt__mesh__cfg__subnet.html#ga0fd04bff5423a36b013089a4ba351d67">bt_mesh_subnets_get</a> (uint16_t net_idxs[], size_t max, off_t skip)</td></tr>
<tr class="memdesc:ga0fd04bff5423a36b013089a4ba351d67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a list of all known Subnet indexes.  <br /></td></tr>
<tr class="separator:ga0fd04bff5423a36b013089a4ba351d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Bluetooth Mesh Subnet Configuration. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f" name="ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a6ba6ac1dcbe5f6cfce9bbf38c1851f">&#9670;&#160;</a></span>bt_mesh_subnet_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_add </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>key</em>[16]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a Subnet. </p>
<p>Adds a subnet with the given network index and network key to the list of known Subnets. All messages sent on the given Subnet will be processed by this node, and the node may send and receive Network Beacons on the given Subnet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">key</td><td>Root network key of the Subnet. All other keys are derived from this.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>The Subnet was successfully added. </td></tr>
    <tr><td class="paramname">STATUS_INSUFF_RESOURCES</td><td>No room for this Subnet. </td></tr>
    <tr><td class="paramname">STATUS_UNSPECIFIED</td><td>The Subnet couldn't be created for some reason. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaec9d827d5f026b473f3ac88988d3c842" name="gaec9d827d5f026b473f3ac88988d3c842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec9d827d5f026b473f3ac88988d3c842">&#9670;&#160;</a></span>bt_mesh_subnet_del()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_del </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a Subnet. </p>
<p>Removes the Subnet with the given network index from the node. The node will stop sending Network Beacons with the given Subnet, and can no longer process messages on this Subnet.</p>
<p>All Applications bound to this Subnet are also deleted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>The Subnet was deleted. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad48780acaae085350a8b48d033717bfa" name="gad48780acaae085350a8b48d033717bfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad48780acaae085350a8b48d033717bfa">&#9670;&#160;</a></span>bt_mesh_subnet_exists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bt_mesh_subnet_exists </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether a Subnet is known. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a Subnet with the given index exists, false otherwise. </dd></dl>

</div>
</div>
<a id="gad251907892150649f3f1ae6b4112cd84" name="gad251907892150649f3f1ae6b4112cd84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad251907892150649f3f1ae6b4112cd84">&#9670;&#160;</a></span>bt_mesh_subnet_kr_phase_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_kr_phase_get </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>phase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Subnet's Key Refresh phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">phase</td><td>Pointer to the Key Refresh variable to fill.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>Successfully populated the <code>phase</code> variable. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaef15af43e74e3c71590c63c5f1e3ea55" name="gaef15af43e74e3c71590c63c5f1e3ea55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef15af43e74e3c71590c63c5f1e3ea55">&#9670;&#160;</a></span>bt_mesh_subnet_kr_phase_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_kr_phase_set </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>phase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the Subnet's Key Refresh phase. </p>
<p>The Key Refresh procedure is started by updating the Subnet keys through <a class="el" href="group__bt__mesh__cfg__subnet.html#ga47236f48940303be27fa6af4797424c2">bt_mesh_subnet_update</a>. This puts the Subnet in Key Refresh Phase 1. Once all nodes have received the new Subnet key, Key Refresh Phase 2 can be activated through this function to start transmitting with the new network key. Finally, to revoke the old key, set the Key Refresh Phase to 3. This removes the old keys from the node, and returns the Subnet back to normal single-key operation with the new key set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">phase</td><td>Pointer to the new Key Refresh phase. Will return the actual Key Refresh phase after updating.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>The Key Refresh phase of the Subnet was successfully changed. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
    <tr><td class="paramname">STATUS_CANNOT_UPDATE</td><td>The given phase change is invalid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga683d1f9abe82649a774b3d53dcaced8e" name="ga683d1f9abe82649a774b3d53dcaced8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga683d1f9abe82649a774b3d53dcaced8e">&#9670;&#160;</a></span>bt_mesh_subnet_node_id_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_node_id_get </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__bt__mesh__cfg.html#ga0a3557a71597885a31cf209c6b83cedb">bt_mesh_feat_state</a> *&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Node Identity state of the Subnet. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">node_id</td><td>Node Identity variable to fill.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>Successfully populated the <code>node_id</code> variable. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga59bf9f022665edc0ad03267e4bd16632" name="ga59bf9f022665edc0ad03267e4bd16632"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59bf9f022665edc0ad03267e4bd16632">&#9670;&#160;</a></span>bt_mesh_subnet_node_id_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_node_id_set </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__bt__mesh__cfg.html#ga0a3557a71597885a31cf209c6b83cedb">bt_mesh_feat_state</a>&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the Node Identity state of the Subnet. </p>
<p>The Node Identity state of a Subnet determines whether the Subnet advertises connectable Node Identity beacons for Proxy Clients to connect to. Once started, the Node Identity beacon runs for 60 seconds, or until it is stopped.</p>
<p>This function serves the same purpose as <a class="el" href="group__bt__mesh__proxy.html#ga7fb3c76f1be6943dd4a18f26e8dd18e7">bt_mesh_proxy_identity_enable</a>, but only acts on a single Subnet.</p>
<p>GATT Proxy support must be enabled through @option{CONFIG_BT_MESH_GATT_PROXY}.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">node_id</td><td>New Node Identity state, must be either <a class="el" href="group__bt__mesh__cfg.html#gga0a3557a71597885a31cf209c6b83cedbabff35d6447ab5608292065f20d1e5275">BT_MESH_FEATURE_ENABLED</a> or <a class="el" href="group__bt__mesh__cfg.html#gga0a3557a71597885a31cf209c6b83cedba17b0aabc3d26da41aab09f009004f729">BT_MESH_FEATURE_DISABLED</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>Successfully set the Node Identity state of the Subnet. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
    <tr><td class="paramname">STATUS_FEAT_NOT_SUPP</td><td>The Node Identity feature is not supported. </td></tr>
    <tr><td class="paramname">STATUS_CANNOT_SET</td><td>Couldn't set the Node Identity state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga47236f48940303be27fa6af4797424c2" name="ga47236f48940303be27fa6af4797424c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga47236f48940303be27fa6af4797424c2">&#9670;&#160;</a></span>bt_mesh_subnet_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_mesh_subnet_update </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>key</em>[16]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the given Subnet. </p>
<p>Starts the Key Refresh procedure for this Subnet by adding a second set of encryption keys. The Subnet will continue sending with the old key (but receiving messages using both) until the Subnet enters Key Refresh phase 2.</p>
<p>This allows a network configurator to replace old network and application keys for the entire network, effectively removing access for all nodes that aren't given the new keys.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idx</td><td>Network index. </td></tr>
    <tr><td class="paramname">key</td><td>New root network key of the Subnet.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">STATUS_SUCCESS</td><td>The Subnet was updated with a second key. </td></tr>
    <tr><td class="paramname">STATUS_INVALID_NETKEY</td><td>The NetIdx is unknown. </td></tr>
    <tr><td class="paramname">STATUS_IDX_ALREADY_STORED</td><td>The <code>key</code> value is the same as the current key. </td></tr>
    <tr><td class="paramname">STATUS_CANNOT_UPDATE</td><td>The Subnet cannot be updated for some reason. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0fd04bff5423a36b013089a4ba351d67" name="ga0fd04bff5423a36b013089a4ba351d67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0fd04bff5423a36b013089a4ba351d67">&#9670;&#160;</a></span>bt_mesh_subnets_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t bt_mesh_subnets_get </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>net_idxs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>skip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a list of all known Subnet indexes. </p>
<p>Builds a list of all known Subnet indexes in the <code>net_idxs</code> array. If the <code>net_idxs</code> array is smaller than the list of known Subnets, this function fills all available entries and returns <code>-ENOMEM</code>. In this case, the next <code>max</code> entries of the list can be read out by calling </p><div class="fragment"><div class="line"><a class="code hl_function" href="group__bt__mesh__cfg__subnet.html#ga0fd04bff5423a36b013089a4ba351d67">bt_mesh_subnets_get</a>(list, max, max);</div>
<div class="ttc" id="agroup__bt__mesh__cfg__subnet_html_ga0fd04bff5423a36b013089a4ba351d67"><div class="ttname"><a href="group__bt__mesh__cfg__subnet.html#ga0fd04bff5423a36b013089a4ba351d67">bt_mesh_subnets_get</a></div><div class="ttdeci">ssize_t bt_mesh_subnets_get(uint16_t net_idxs[], size_t max, off_t skip)</div><div class="ttdoc">Get a list of all known Subnet indexes.</div></div>
</div><!-- fragment --><p>Note that any changes to the Subnet list between calls to this function could change the order and number of entries in the list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">net_idxs</td><td>Array to fill. </td></tr>
    <tr><td class="paramname">max</td><td>Max number of indexes to return. </td></tr>
    <tr><td class="paramname">skip</td><td>Number of indexes to skip. Enables batched processing of the list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of indexes added to the <code>net_idxs</code> array, or <code>-ENOMEM</code> if the number of known Subnets exceeds the <code>max</code> parameter. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
